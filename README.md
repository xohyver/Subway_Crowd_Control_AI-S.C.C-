# Subway Crowd Control AI(S.C.C)
-how to use : 



# ğŸ“ƒ í”„ë¡œì íŠ¸ ì •ë³´

### 1. ì œì‘ê¸°ê°„
'23.07.07 ~ '23.09.02

### 2. ì°¸ì—¬ ì¸ì›
> |                    Name                    |  Position   |
> | :----------------------------------------: | :---------: |
> | [íƒœí˜„ìˆ˜](https://github.com/xohyver/) |   AI develop  |

### 3.[ì—­í• ] : AI ê°œë°œì
- ì‹œìŠ¤í…œ ì„¤ê³„ ë° êµ¬í˜„ :
ë³‘ë ¬ Thread ë° Opencv ì´ìš© ì‹¤ì‹œê°„ ì›¹ìº  ì‹œìŠ¤í…œ êµ¬ì¶•, Pygame ì´ìš© ì•ˆë‚´ë°©ì†¡ ì†¡ì¶œ ì„¤ê³„ 
- ë°ì´í„° ìˆ˜ì§‘ ë° ëª¨ë¸ í•™ìŠµ :
ëª¨ë¸ í•™ìŠµì„ ìœ„í•œ ì´ë¯¸ì§€ ìˆ˜ì§‘ ë° Yolov5 ì»¤ìŠ¤í…€ íŠ¸ë ˆì´ë‹

### 4. ì‚¬ìš© ê¸°ìˆ 
> Python3  
> Opencv  
> Yolov5  
> Torch

# ğŸ“Š Structure
- ì¹´ë©”ë¼ê°€ ì‚¬ëŒì˜ ë¨¸ë¦¬ ìƒë‹¨ì„ ì´¬ì˜í•¨
- Yolov5 ì´ìš© ê°ì²´ ì¸ì‹ìœ¼ë¡œ ë¨¸ë¦¬ ê°œìˆ˜ íŒŒì•…
- ì„¤ì •í•´ë‘” ì„ê³„ê°’ ì´ìƒì˜ ë¨¸ë¦¬ ê°ì§€ì‹œ ì•ˆë‚´ë°©ì†¡ mp3 ì¬ìƒìœ¼ë¡œ ì¸ì› í†µì œ ìœ ë„

# ğŸ”‘ í•µì‹¬ê¸°ëŠ¥

### 1. ìµœëŒ€ì¸ì› ì„¤ì •
> í”„ë¡œê·¸ë¨ ì‹¤í–‰ í›„ ì‚¬ìš©ìëŠ” ì¹´ë©”ë¼ê°€ ë¹„ì¶”ëŠ” ê³µê°„ì˜ ìµœëŒ€ ì¸ì› ìˆ˜ë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.

### 2. ì‹¤ì‹œê°„ ì›¹ìº  íƒì§€
> Opencv ë° ë³‘ë ¬ Threadë¡œ ì‹¤ì‹œê°„ ê°ì²´íƒì§€ë¥¼ ìˆ˜í–‰í•˜ì—¬ ì¸ì›ì„ íŒŒì•…í•©ë‹ˆë‹¤.

# ë¬¸ì œ í•´ê²°
### 1. ì´¬ì˜ê° ì„¤ê³„
> ì²˜ìŒ ì¹´ë©”ë¼ ê°ë„ë¥¼ í•˜ë°© 45ë„ë¡œ ì„¤ê³„í–ˆìœ¼ë‚˜, ë¨¼ ê±°ë¦¬ì˜ ê°ì²´ ì¸ì‹ ì •í™•ë„ ì €í•˜ ë“±ì˜ ë¬¸ì œë¡œ ì¹´ë©”ë¼ê°ì„ ì²œì¥ì—ì„œ ë°”ë‹¥ì„ ë°”ë¼ë³´ëŠ” ê°ë„ë¡œ ë³€ê²½í•˜ì—¬ ì •í™•ë„ë¥¼ í–¥ìƒì‹œí‚´

### 2. ëª¨ë¸ ë¶€ì í•©
> ê³µê°œ ëª¨ë¸ì„ ì‚¬ìš©í•œ ê²°ê³¼ ì‚¬ëŒì˜ ì–¼êµ´ê¹Œì§€ í•œë²ˆì— ì¸ì‹í•˜ì—¬ ì–¼êµ´ì´ ê°€ë ¤ì§€ë©´ ì •í™•ë„ê°€ ì €í•˜ë¨. ë”°ë¼ì„œ ë¨¸ë¦¬ ìƒë‹¨ë§Œì„ ë¼ë²¨ë§í•œ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ì—¬ ëª¨ë¸ì„ ìƒì„±í•¨

# ğŸ“• ê¸°íƒ€ ìë£Œ

### ì‹œì—°ì˜ìƒ
https://youtu.be/7izh1vydHPA?si=Bczb0R-mfdPYqIDC





















# Subway_Crowd_Control_AI
ì´ê²ƒì€ ì§€í•˜ì² ì˜ ì¸ì›ì„ íš¨ê³¼ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•œ í”„ë¡œê·¸ë¨ì…ë‹ˆë‹¤. ì‚¬ëŒì˜ ë¨¸ë¦¬ë¥¼ ì¸ì‹í•˜ì—¬ ì¸ì›ì„ ì„¸ê³ , ì„¤ì •í•œ ìµœëŒ€ì¸ì›ì— ë„ë‹¬í•˜ë©´ ì•ˆë‚´ë°©ì†¡ì´ ì¶œë ¥ë©ë‹ˆë‹¤. ì´ í”„ë¡œê·¸ë¨ì€ ì‚¬ëŒì˜ ë¨¸ë¦¬ë¥¼ í•™ìŠµí•œ ê°€ì¤‘ì¹˜ íŒŒì¼ì„ ê¸°ë°˜ìœ¼ë¡œ êµ¬ë™ë©ë‹ˆë‹¤./This is a program designed to effectively manage the number of passengers in the subway. It detects people's heads to count the number of passengers, and when the maximum capacity is reached, it plays a guidance announcement. This program is based on weight files that have been trained to detect human heads.


# How to use
1. main.pyì—ì„œ Subway_Crowd_control_AI.pt íŒŒì¼ê³¼ ì•ˆë‚´ìŒì„± íŒŒì¼ì˜ ë””ë ‰í† ë¦¬ë¥¼ ì„¤ì •í•˜ëŠ” ì½”ë“œë¥¼ ë³€ê²½í•˜ì„¸ìš”./Modify the directory paths for "Subway_Crowd_control_AI.pt" and the guidance audio files in the "main.py" file.
2. main.pyíŒŒì¼ì„ ì‹¤í–‰ì‹œí‚¤ì„¸ìš”./Run main.py
3. ì²˜ìŒ ëœ¨ëŠ” í™”ë©´ì— ìµœëŒ€ì¸ì›ì„ ì„¤ì •í•˜ê³  startë¥¼ ëˆ„ë¥´ì„¸ìš”./On the initial screen, set the maximum capacity and press 'start'.
4. ê°ì²´ì¸ì‹ì„ ìˆ˜í–‰í•˜ë©´ ë©ë‹ˆë‹¤./Perform object recognition.

# Train
ì§ì ‘ ë¨¸ë¦¬ ì´ë¯¸ì§€ 800ì¥ì„ ìˆ˜ì§‘í•œ ë’¤  roboflowë¥¼ ì´ìš©í•´ ë°ì´í„°ì…‹ì„ ìƒì„±í•œ í›„, yolov5ë¡œ ì»¤ìŠ¤í…€ íŠ¸ë ˆì´ë‹ì„ í•˜ì—¬ ê°€ì¤‘ì¹˜ íŒŒì¼ì¸ Subway_Crowd_control_AI.ptì„ ì¶”ì¶œí–ˆë‹¤. Subway_Crowd_control_AI.ptë¥¼ ì´ìš©í•˜ì—¬ ê°ì²´ì¸ì‹ì„ ìˆ˜í–‰í•œë‹¤./After collecting 800 head images manually and generating a dataset using Roboflow, I performed custom training with YOLOv5 to obtain the weight file 'Subway_Crowd_control_AI.pt'. I will use 'Subway_Crowd_control_AI.pt' to perform object recognition.

# Tips
1.ì•ˆë‚´ìŒì„±ì˜ ì„±ë³„ì„ ë°”ê¿€ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ttswomanEng/ttsmanEngì— ë”°ë¼ ê°ê° ë‚¨ì„±, ì—¬ì„±ì˜ ìŒì„±ì„ ë‹´ê³  ìˆìŠµë‹ˆë‹¤. main.pyì—ì„œ  play_announcementí•¨ìˆ˜ ë‚´ì— ìŒì„±íŒŒì¼ ê²½ë¡œë¥¼ ìˆ˜ì •í•˜ì„¸ìš”./You can change the gender of the guidance voice. Depending on whether you choose "ttswomanEng" or "ttsmanEng," you will have female or male voices, respectively. Please modify the audio file path within the "play_announcement" function in "main.py.

2. ë§Œì•½ ì›¹ìº ì„ ì—°ê²°í•˜ê³ ì‹¶ë‹¤ë©´ line 87ì—ì„œ cap = cv2.VideoCapture(0)ë¥¼ ì¹´ë©”ë¼ ì¸ë±ìŠ¤ì— ë§ê²Œ ë³€ê²½í•˜ì„¸ìš”./If you want to connect a webcam, please change "cap = cv2.VideoCapture(0)" on line 87 to the appropriate camera index.

3.mainGui.pyëŠ” Pyqt5ë¥¼ ì‚¬ìš©í•˜ì—¬ GUIê°€ ì¡´ì¬í•˜ëŠ” ë²„ì „ì´ê³ , main.pyëŠ” GUIê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë²„ì „ì…ë‹ˆë‹¤./MainGui.py is a version with a GUI using Pyqt5, and main.py is a version without a GUI.


ì´ ì½”ë“œëŠ” í•˜ë‚˜ì˜ ë¬¸ì œê°€ ìˆëŠ”ë° ì½”ë“œë¥¼ ì¢…ë£Œí•˜ê¸° ìœ„í•´ì„œ ì—ë””í„° í”„ë¡œê·¸ë¨ê¹Œì§€ ì™„ì „íˆ ì¢…ë£Œí•´ì•¼í•œë‹¤ëŠ” ì ì…ë‹ˆë‹¤. í„°ë¯¸ë„ì—ì„œ Ctrl+Cë¥¼ ëˆŒëŸ¬ë„ ìŒì„± ì¬ìƒì´ ë©ˆì¶”ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ë¬¸ì œë¥¼ í•´ê²° ê°€ëŠ¥í•œ ë°©ë²•ì„ ì•„ëŠ” ë¶„ì€ nmykga@gmail.comìœ¼ë¡œ í”¼ë“œë°± ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤./The issue with this code is that in order to exit the code, you have to completely exit the editor program as well. Even if you press Ctrl+C in the terminal, the audio playback does not stop. If anyone knows a solution to this problem, please provide feedback to nmykga@gmail.com. Thank you.





